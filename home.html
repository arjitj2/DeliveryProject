<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="home.css">
    <title>Delivery</title>
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCpSSHy2RLV7562BeqzPEoVt5FfFDk3AtY&sensor=false&callback=initMap">
    </script>
    <script type="text/javascript">
      var map
      var service
      function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
          center: {lat: 40.121993, lng: -88.257614},
          zoom: 13
        })
        service = new google.maps.DistanceMatrixService()
      }
      
      var origin = ""
      var destination = ""
      function storeInput() {
        origins = [document.getElementById("origin").value]
        destinations = [document.getElementById("dest").value]
        distanceMatrix(origins, destinations)
      }

      function distanceMatrix(origins, destinations) {
        service.getDistanceMatrix(
          {
            origins: origins,
            destinations: destinations,
            travelMode: google.maps.TravelMode.DRIVING,
            unitSystem: google.maps.UnitSystem.IMPERIAL,
          }, 
          callback
        )
      }

      var distances = []

      function callback(response, status) {
        alert("sup")
        if (status == google.maps.DistanceMatrixStatus.OK) {
          var origins = response.originAddresses;
          var destinations = response.destinationAddresses;

          for (var i = 0; i < origins.length; i++) {
            var results = response.rows[i].elements;
            for (var j = 0; j < results.length; j++) {
              var element = results[j];
              var distance = element.distance.text;
              var duration = element.duration.text;
              var from = origins[i];
              var to = destinations[j];
              distances << distance
            }
          }
        }
        document.getElementById("responses").innerHTML = distances
      }
    </script>
  </head>
  <body>
    <div id="map">
    </div>
    <div>
      <form>
        Origin:<br><input type="text" id="origin" value="England"><br>
        Destination:<br><input type="text" id="dest" value="Croatia"><br><br>
        <input type="submit" value="Submit" onclick="storeInput()">
      </form>
      <p id="responses"></p>
    </div>
  </body>
</html>